@namespace TextileEditor.Web.Layout
@using TextileEditor.Web.Resources

<FluentButton id="FileMenuOpen" Appearance="Appearance.Stealth" @onclick="@(() => open = !open)">
    @Localizer.GetString(SharedResource.File)
</FluentButton>

<FluentMenu Anchor="FileMenuOpen" @bind-Open="open" VerticalThreshold="170">
    <FluentMenuItem Label="@Localizer.GetString(SharedResource.New)" OnClick="CreateSessionAsync" />
    <FluentMenuItem Label="@Localizer.GetString(SharedResource.Upload)" OnClick="UploadTextileAsync" />
    <FluentMenuItem Label="@Localizer.GetString(SharedResource.Save)">
        <MenuItems>
            <FluentMenuItem Label="@Localizer.GetString(SharedResource.Save)" OnClick="DownloadSessionAsync" />
            <FluentMenuItem Label="@Localizer.GetString(SharedResource.GenerateDownloadLink)" OnClick="GenerateDownloadLinkAsync" />
        </MenuItems>
    </FluentMenuItem>
    <FluentMenuItem Label="@Localizer.GetString(SharedResource.SaveAs)" OnClick="OpenDialogAsync" />
</FluentMenu>

<FluentInputFile @ref="@FileUploader"
                 DragDropZoneVisible="false"
                 Mode="InputFileMode.SaveToTemporaryFolder"
                 Multiple="false"
                 MaximumFileSize="@(100 * 1024 * 1024)"
                 Accept="@(AllowExtensions)" />